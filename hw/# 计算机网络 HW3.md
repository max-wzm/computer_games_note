# 计算机网络 HW3

<center> 200110611 王志铭</center>

## 

(1). 在子网192.168.1.0/28中，其子网掩码为255.255.255.240. （二进制当中28个1）

默认网关是子网与外网连接的设备，在图中可以看到是192.168.1.1。

(2). 

- 源IP：被修改为130.11.22.3
- TTL: 减一
- Checksum：重新计算

(3). 由于片偏移字段以8B为单位，一个最大分片可以装载：

$$
d =\left\lfloor \frac{M-20}{8} \right\rfloor \times 8=488,
$$

则需要将IP分组为

$$
n = \left\lceil \frac{L-20}{d}\right\rceil =4.
$$

由公式

$$
F_i=\frac{d}{8}\times(i-1) \qquad L_i=\begin{cases}
d+20 &1\le i<n\\
L-(n-1)d &i=n\\
\end{cases} \qquad MF_i = \begin{cases}
1 &1\le i<n\\
0 &i=n\\
\end{cases} 
$$

可以得到结果：

No.|ID|DF|MF|length|offset
--|--|--|--|--|--
1|6789|0|1|508|0
2|6789|0|1|508|61
3|6789|0|1|508|122
4|6789|0|0|36|183


## 

(1). DHCP服务器可以分配的范围是111.123.15.5 ～ 111.123.15.254. 

DHCP Discover 报文的源IP是0.0.0.0，目的IP是255.255.255.255.

(2). 可以获得子网掩码、默认网关地址、DNS服务器名称和IP地址。

(3). 能，不能。对于子网111.123.15.0/24，子网掩码的配置是正确的。

但是对于默认网关111.123.15.2（即DHCP服务器），DHCP服务器与WWW服务器连通，所以主机1可以访问WWW服务器。

但是DHCP服务器没有到达Internet的路由，所以通过DHCP服务器作为网关无法访问。可以通过111.123.15.1的路由器访问。

## 

(1). 子网划分结果如下所示：

子网|子网地址|广播地址|子网掩码|子网分配IP数|地址范围
--|--|--|--|--|--|--
1|202.118.1.0|202.118.1.31|255.255.255.224|30|202.118.1.1～202.118.1.30
2|202.118.1.32|202.118.1.63|255.255.255.224|30|202.118.1.33～202.118.1.62
3|202.118.1.64|202.118.1.127|255.255.255.192|62|202.118.1.65～202.118.1.126

(2). R1的路由表如下:

目的网络IP|子网掩码|下一跳IP|接口
-|-|-|-
202.118.1.0|255.255.255.224|/|E1
202.118.1.32|255.255.255.224|/|E2
202.118.1.64|255.255.255.192|/|E3
202.118.3.2|255.255.255.255|202.118.2.1|L0
0.0.0.0|0.0.0.0|202.118.2.1|L0

##

(1). R2的路由表如下：

目的网络IP|下一跳IP|接口
-|-|-
153.14.5.0/24|153.14.3.2|S0
194.17.20.0/23|194.17.24.2|S1
194.17.20.128/25|/|E0

(2). 根据最长前缀匹配，194.17.20.200匹配到194.17.20.128/25当中。根据路由表，R2会通过E0转发。

(3). 在AS之间采用的是BGP协议，基于TCP协议进行传输。

## 

(1). R1的路由表如下：

目的网络|接口
-|-
192.168.1.0/24|S1
192.168.1.192/26|E0
192.168.2.0/23|S0

(2). R3原本到目标子网🕸️的DV是1. 突然检测到不可达后，变成了2.

第一轮交换时，R1从R2、R3交换得到DV，将到目标子网的DV更新为3；R3同理，经过交换后到目标子网的DV更新为3.

第二轮交换时，过程与上面类似，最终R1的DV更新为4. 

从网络拓扑可以看到，目标子网不可达不会影响R1到其他网络的DV。最终得到R1的DV表如下所示。

目的网络|距离向量
-|-
192.168.1.192/26|1
192.168.2.0/23|2
192.168.1.0/25|2
192.168.1.128/26|4